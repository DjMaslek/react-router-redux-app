(this.webpackJsonptest1=this.webpackJsonptest1||[]).push([[0],{31:function(e,t,r){e.exports=r(43)},36:function(e,t,r){},42:function(e,t,r){},43:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(19),c=r.n(o),i=(r(36),r(2)),l=r(3),s=r(5),u=r(4),p=r(6),g=r(7),h=r(15),f=r(12),m=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.getNews)(),console.log()}},{key:"render",value:function(){var e=this.props,t=e.isFetching,r=e.errorMsg,n=(this.props.data||{}).map((function(e){return a.a.createElement("div",{className:"news-block",key:e.id},a.a.createElement("h3",null,e.title),a.a.createElement("p",null,e.text))}));return a.a.createElement("div",{className:"news"},a.a.createElement("h2",{className:"header"},"News"),t?a.a.createElement("p",null,"Loading..."):n,r&&a.a.createElement("p",{className:"err"},r))}}]),t}(a.a.Component),d="GET_NEWS",O="GET_NEWS_SUCCESS",b="GET_NEWS_FAILURE";var y=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.news,r=e.getNews;return a.a.createElement(m,{getNews:r,data:t.data,isFetching:t.isFetching,errorMsg:t.errorMsg})}}]),t}(a.a.Component),j=Object(h.g)(Object(f.b)((function(e){return{news:e.news}}),(function(e){return{getNews:function(){return e((function(e){e({type:d}),fetch("https://mysterious-reef-29460.herokuapp.com/api/v1/news ").then((function(e){if(!e.ok)throw e;return e.json()}),(function(e){console.log("An error occurred.",e)})).then((function(t){"err"===t.status?e({type:b,payload:{errorMsg:t.message},error:!0}):e({type:O,payload:t})})).catch((function(t){console.log(t),e({type:b,payload:{errorMsg:"An error occurred"},error:!0})}))}))}}}))(y)),E=function(e){function t(){var e,r;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={username:"",password:"",redirecting:!1},r.onBtnClickHandler=function(e){e.preventDefault();var t=r.state,n=t.username,a=t.password;r.props.handleLogin({email:n,password:a},(function(){r.setState({redirecting:!0}),localStorage.setItem("isLogged",!0)}),(function(){r.setState({username:"",password:""})}))},r.handleNameChange=function(e){r.setState({username:e.currentTarget.value})},r.handlePassChange=function(e){r.setState({password:e.currentTarget.value})},r.renderTemplate=function(){},r}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,r=e.password,n=this.props,o=n.errorMsg,c=n.isFetching;return localStorage.getItem("isLogged")?a.a.createElement(h.a,{to:"/profile"}):a.a.createElement("form",{className:"login-form"},a.a.createElement("input",{type:"email",name:"username",placeholder:"Username",value:t,onChange:this.handleNameChange}),a.a.createElement("input",{type:"password",name:"pass",placeholder:"Password",value:r,onChange:this.handlePassChange}),c?a.a.createElement("button",{className:"login-btn",disabled:"disbled"},"Loading..."):a.a.createElement("button",{className:"login-btn",onClick:this.onBtnClickHandler},"Log in"),o&&a.a.createElement("p",{className:"err"},o))}}]),t}(a.a.Component),v="LOG_IN",w="LOG_IN_SUCCESS",k="LOG_IN_FAILURE",P="LOG_OUT";var N=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.login,r=e.handleLogin;return a.a.createElement(E,{errorMsg:t.errorMsg,handleLogin:r,isFetching:t.isFetching})}}]),t}(a.a.Component),C=Object(h.g)(Object(f.b)((function(e){return{login:e.login}}),(function(e){return{handleLogin:function(t,r,n){return e((a=t,o=r,c=n,function(e){e({type:v}),fetch("https://mysterious-reef-29460.herokuapp.com/api/v1/validate",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(a)}).then((function(e){if(!e.ok)throw e;return e.json()}),(function(e){console.log("An error occurred.",e)})).then((function(t){"err"===t.status?(c(),e({type:k,payload:{errorMsg:"The username or password you entered is incorrect"},error:!0})):(o(),e({type:w,payload:t}))})).catch((function(t){console.log(t),e({type:k,payload:{errorMsg:"An error occurred"},error:!0})}))}));var a,o,c}}}))(N)),S=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.getProfile)(),console.log()}},{key:"render",value:function(){var e=this.props,t=e.isFetching,r=e.errorMsg,n=this.props.data||{},o=localStorage.getItem("isLogged"),c=n.map((function(e){return a.a.createElement("div",{key:e.userId},a.a.createElement("h3",null,"City:"),a.a.createElement("p",null,e.city),a.a.createElement("div",null,a.a.createElement("h3",null,"Languages: "),e.languages.map((function(e,t){return a.a.createElement("p",{key:t},e)}))),a.a.createElement("div",null,a.a.createElement("h3",null,"Socials:"),e.social.map((function(e,t){return a.a.createElement("p",{key:t},a.a.createElement("a",{href:e.link},a.a.createElement("i",{className:e.label+"-ico icon"})))}))))}));return o?a.a.createElement("div",{className:"profile"},a.a.createElement("h2",{className:"header"},"Profile"),t?a.a.createElement("p",null,"Loading..."):c,r&&a.a.createElement("p",{className:"err"},r)):a.a.createElement(h.a,{to:"/login"})}}]),t}(a.a.Component),F="GET_PROFILE",L="GET_PROFILE_SUCCESS",M="GET_PROFILE_FAILURE";var I=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.profile,r=e.getProfile;return a.a.createElement(S,{getProfile:r,data:t.data,isFetching:t.isFetching,errorMsg:t.errorMsg})}}]),t}(a.a.Component),_=Object(h.g)(Object(f.b)((function(e){return{profile:e.profile}}),(function(e){return{getProfile:function(){return e(function(){var e=this;return function(t){t({type:F}),fetch("https://mysterious-reef-29460.herokuapp.com/api/v1/user-info/1").then((function(e){if(!e.ok)throw e;return e.json()}),(function(e){console.log("An error occurred.",e)})).then((function(r){console.log(e),console.log("OK",r),"err"===r.status?t({type:M,payload:{errorMsg:r.message},error:!0}):t({type:L,payload:r})})).catch((function(e){console.log(e),t({type:M,payload:{errorMsg:"An error occurred"},error:!0})}))}}())}}}))(I)),D=function(e){function t(){var e,r;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).handleLogOutClick=function(){(0,r.props.logOut)()},r}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=localStorage.getItem("isLogged");return a.a.createElement("div",{className:"profile-status"},e?a.a.createElement("span",{className:"status",onClick:this.handleLogOutClick},"Log out"):a.a.createElement(g.b,{to:"/login",className:"status"},"Log in"))}}]),t}(a.a.Component),T=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.logOut;return a.a.createElement(D,{logOut:e})}}]),t}(a.a.Component),A=Object(h.g)(Object(f.b)((function(e){return{login:e.login}}),(function(e){return{logOut:function(){return e((function(e){localStorage.removeItem("isLogged"),e({type:P}),window.location.reload()}))}}}))(T)),G=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"home"},a.a.createElement("h2",{className:"header"},"Home"))}}]),t}(a.a.Component);r(42);function U(){return a.a.createElement("h2",{className:"header"},"NotFound")}var R=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(g.a,null,a.a.createElement("div",null,a.a.createElement("nav",{className:"navigation"},a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(g.b,{to:"/"},"Home")),a.a.createElement("li",null,a.a.createElement(g.b,{to:"/news"},"News")),a.a.createElement("li",null,a.a.createElement(g.b,{to:"/profile"},"Profile")))),a.a.createElement(A,null),a.a.createElement(h.d,null,a.a.createElement(h.b,{path:"/news"},a.a.createElement(j,null)),a.a.createElement(h.b,{path:"/login"},a.a.createElement(C,null)),a.a.createElement(h.b,{path:"/profile"},a.a.createElement(_,null)),a.a.createElement(h.b,{exact:!0,path:"/"},a.a.createElement(G,null)),a.a.createElement(h.b,{path:"*"},a.a.createElement(U,null)))))}}]),t}(n.Component),W=r(16),B=r(17);function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){Object(B.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var J={userId:null,errorMsg:"",isFetching:!1};function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){Object(B.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var q={data:[],isFetching:!1,errorMsg:""};function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){Object(B.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var V={data:[],isFetching:!1,errorMsg:""};var X=Object(W.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return x({},e,{isFetching:!0});case P:return x({},e,{userId:null,errorMsg:""});case w:return x({},e,{userId:t.payload.data.id,isFetching:!1});case k:return x({},e,{isFetching:!1,errorMsg:t.payload.errorMsg});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return $({},e,{isFetching:!0});case L:return $({},e,{data:[t.payload.data],isFetching:!1});case M:return $({},e,{isFetching:!1,errorMsg:t.payload.errorMsg});default:return e}},news:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Q({},e,{isFetching:!0});case O:return Q({},e,{data:t.payload.data,isFetching:!1});case b:return Q({},e,{isFetching:!1,errorMsg:t.payload.errorMsg});default:return e}}}),Y=r(29),Z=r(30),ee=r.n(Z),te=Object(W.d)(X,Object(W.a)(Y.a,ee.a));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(f.a,{store:te},a.a.createElement(g.a,null,a.a.createElement(R,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[31,1,2]]]);
//# sourceMappingURL=main.092fdea9.chunk.js.map